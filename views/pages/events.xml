<odoo>
  <template id="events_page">
    <t t-call="website.layout">
      <div class="events-page">
        <!-- Hero Section -->
        <section class="events-hero">
            <div class="events-hero-content">
                <h1>Jadwal Kegiatan</h1>
                <p>Temukan berbagai aktivitas inspiratif untuk pengembangan diri dan bisnis Anda.</p>
            </div>
        </section>

        <!-- Filter Bar -->
        <div class="filter-bar-container" id="events-grid">
            <div class="filter-bar">
                <span class="filter-bar-label">Filter:</span>
                
                <!-- Category Dropdown -->
                <div class="filter-dropdown" data-filter-type="category">
                    <button class="filter-dropdown-trigger" t-att-class="'active' if current_category and current_category != 'all' else ''">
                        <t t-set="curr_cat_label" t-value="'Semua Kategori'"/>
                        <t t-foreach="categories" t-as="c">
                            <t t-if="c['id'] == current_category">
                                <t t-set="curr_cat_label" t-value="c['label']"/>
                            </t>
                        </t>
                        <span><t t-esc="curr_cat_label"/></span>
                        <i class="fa fa-chevron-down chevron"></i>
                    </button>
                    <div class="filter-dropdown-menu">
                        <div class="filter-dropdown-item" data-value="all" t-att-class="'selected' if not current_category or current_category == 'all' else ''">
                             <i class="fa fa-check check-icon"></i>
                             <span>Semua Kategori</span>
                        </div>
                        <t t-foreach="categories" t-as="c">
                            <div class="filter-dropdown-item" t-att-data-value="c['id']" t-att-class="'selected' if current_category == c['id'] else ''">
                                <i class="fa fa-check check-icon"></i>
                                <span t-esc="c['label']"/>
                            </div>
                        </t>
                    </div>
                </div>

                <!-- Format Dropdown -->
                <div class="filter-dropdown" data-filter-type="format">
                    <button class="filter-dropdown-trigger" t-att-class="'active' if current_format and current_format != 'all' else ''">
                        <t t-set="curr_fmt_label" t-value="'Semua Format'"/>
                        <t t-foreach="formats" t-as="f">
                            <t t-if="f['id'] == current_format">
                                <t t-set="curr_fmt_label" t-value="f['label']"/>
                            </t>
                        </t>
                        <span><t t-esc="curr_fmt_label"/></span>
                        <i class="fa fa-chevron-down chevron"></i>
                    </button>
                    <div class="filter-dropdown-menu">
                        <div class="filter-dropdown-item" data-value="all" t-att-class="'selected' if not current_format or current_format == 'all' else ''">
                             <i class="fa fa-check check-icon"></i>
                             <span>Semua Format</span>
                        </div>
                        <t t-foreach="formats" t-as="f">
                            <div class="filter-dropdown-item" t-att-data-value="f['id']" t-att-class="'selected' if current_format == f['id'] else ''">
                                <i class="fa fa-check check-icon"></i>
                                <span t-esc="f['label']"/>
                            </div>
                        </t>
                    </div>
                </div>

                <!-- City Dropdown -->
                <div class="filter-dropdown" data-filter-type="city">
                    <button class="filter-dropdown-trigger" t-att-class="'active' if current_city and current_city != 'all' else ''">
                        <t t-set="curr_city_label" t-value="'Semua Lokasi'"/>
                        <t t-foreach="cities" t-as="c">
                            <t t-if="c['id'] == current_city">
                                <t t-set="curr_city_label" t-value="c['label']"/>
                            </t>
                        </t>
                        <span><t t-esc="curr_city_label"/></span>
                        <i class="fa fa-chevron-down chevron"></i>
                    </button>
                    <div class="filter-dropdown-menu">
                        <t t-foreach="cities" t-as="c">
                            <div class="filter-dropdown-item" t-att-data-value="c['id']" t-att-class="'selected' if current_city == c['id'] else ''">
                                <i class="fa fa-check check-icon"></i>
                                <span t-esc="c['label']"/>
                            </div>
                        </t>
                    </div>
                </div>

                <!-- Search -->
                <div class="search-input-container">
                    <div class="search-input-wrapper">
                        <i class="fa fa-search search-icon"></i>
                        <input type="text" placeholder="Cari kegiatan..." class="search-input" t-att-value="search_query"/>
                    </div>
                </div>
            </div>

            <!-- Active Filters -->
            <t t-set="has_active_filters" t-value="(current_category and current_category != 'all') or (current_format and current_format != 'all') or (current_city and current_city != 'all') or search_query"/>
            <t t-if="has_active_filters">
                <div class="active-filters">
                    <span class="active-filters-label">Filter aktif:</span>
                    <t t-if="current_category and current_category != 'all'">
                        <span class="filter-chip" data-filter-type="category">
                            <t t-foreach="categories" t-as="c">
                                <t t-if="c['id'] == current_category"><t t-esc="c['label']"/></t>
                            </t>
                            <button><i class="fa fa-times"></i></button>
                        </span>
                    </t>
                    <t t-if="current_format and current_format != 'all'">
                        <span class="filter-chip" data-filter-type="format">
                            <t t-foreach="formats" t-as="f">
                                <t t-if="f['id'] == current_format"><t t-esc="f['label']"/></t>
                            </t>
                            <button><i class="fa fa-times"></i></button>
                        </span>
                    </t>
                    <t t-if="current_city and current_city != 'all'">
                        <span class="filter-chip" data-filter-type="city">
                            <t t-foreach="cities" t-as="c">
                                <t t-if="c['id'] == current_city"><t t-esc="c['label']"/></t>
                            </t>
                            <button><i class="fa fa-times"></i></button>
                        </span>
                    </t>
                    <t t-if="search_query">
                        <span class="filter-chip" data-filter-type="search">
                            "<t t-esc="search_query"/>"
                            <button><i class="fa fa-times"></i></button>
                        </span>
                    </t>
                    <button class="clear-all-btn">Hapus Semua</button>
                </div>
            </t>
        </div>

        <!-- content -->
        <div class="events-content">
            <!-- Empty State -->
            <t t-if="not events">
                <div class="empty-state">
                    <div class="empty-state-icon">
                        <i class="fa fa-search fa-2x"></i>
                    </div>
                    <h3>Belum ada kegiatan ditemukan</h3>
                    <p>Sepertinya belum ada kegiatan untuk filter yang Anda pilih. Coba sesuaikan filter atau cek lagi nanti ya!</p>
                    <button class="clear-all-btn empty-state-btn">Tampilkan Semua Kegiatan</button>
                </div>
            </t>

            <!-- Events Grid -->
            <div class="events-grid">
                <t t-foreach="events" t-as="event">
                    <a t-attf-href="/acara/#{event['id']}" class="event-card">
                        <div class="event-card-image">
                            <img t-att-src="event['image']" alt="Event Image"/>
                            <div class="event-poster-overlay"></div>
                        </div>

                        <div class="event-card-badges">
                            <span t-attf-class="badge badge-status #{event['status']}">
                                <t t-if="event['status'] == 'ongoing'">Live</t>
                                <t t-elif="event['status'] == 'upcoming'">Soon</t>
                                <t t-else="">Done</t>
                            </span>
                            <span class="badge badge-format text-capitalize" t-esc="event['format']"/>
                        </div>

                        <div class="event-card-content">
                            <div class="event-card-info">
                                <span class="event-card-category" t-esc="event['category']"/>
                                <h3 class="event-card-title" t-esc="event['title']"/>
                                
                                <div class="event-card-meta">
                                    <span class="event-card-meta-item">
                                        <i class="fa fa-calendar"></i>
                                        <t t-esc="event['date']"/>
                                    </span>
                                    <span class="event-card-meta-item">
                                        <i class="fa fa-map-marker"></i>
                                        <t t-esc="event['location']"/>
                                    </span>
                                </div>
                            </div>
                            
                            <div class="event-card-footer">
                                <span t-attf-class="event-card-price #{'free' if event['price'] == 'Free' else ''}" t-esc="event['price']"/>
                                <button class="book-btn">
                                    <i class="fa fa-ticket"></i>
                                    <span>BOOK</span>
                                </button>
                            </div>
                        </div>
                    </a>
                </t>
            </div>

            <!-- Pagination -->
            <t t-if="pager['page_count'] > 1">
                <div class="pagination">
                    <a t-att-href="pager['page_previous']['url'] if pager['page_previous'] else '#'"
                       t-att-class="'pagination-btn' + (' disabled' if not pager['page_previous'] else '')">
                        <i class="fa fa-chevron-left"></i>
                    </a>

                    <t t-foreach="pager['pages']" t-as="p">
                        <a t-att-href="p['url']"
                           t-att-class="'pagination-btn' + (' active' if p['num'] == pager['page']['num'] else '')">
                            <t t-esc="p['num']"/>
                        </a>
                    </t>

                    <a t-att-href="pager['page_next']['url'] if pager['page_next'] else '#'"
                       t-att-class="'pagination-btn' + (' disabled' if not pager['page_next'] else '')">
                        <i class="fa fa-chevron-right"></i>
                    </a>
                </div>
            </t>
        </div>
      </div>
    </t>
  </template>
</odoo>
